<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kaptia - Mapa Interactivo</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://scontent.fcvj5-1.fna.fbcdn.net/v/t39.30808-6/500737320_684205464497485_8214817728757942933_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=103&ccb=1-7&_nc_sid=833d8c&_nc_ohc=tJh3AuSi5rkQ7kNvwHSd86T&_nc_oc=AdnIQRGQh5aisLMkCwlI77dOf8e3uxbuGQQ71ixGMWU367xEGMcVrbCZw9CIAGAVPIX5y4cSNooJRRmED_-Pk2Oj&_nc_zt=23&_nc_ht=scontent.fcvj5-1.fna&_nc_gid=h4B5xRQOO6bq6jsCwHbLoA&oh=00_AfJUFyGLAQ4Sy8kMl-AmfD68XXPXLA49Yb_gGTXhkBILfg&oe=6837FAED"/>
  <!-- Fuente Google: Poppins -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,600&display=swap" rel="stylesheet"/>
  <!-- Hoja de estilos principal -->
  <link rel="stylesheet" href="styles.css"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body class="has-sidebar">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-profile">
      <img src="https://scontent.fcvj5-1.fna.fbcdn.net/v/t39.30808-6/500737320_684205464497485_8214817728757942933_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=103&ccb=1-7&_nc_sid=833d8c&_nc_ohc=tJh3AuSi5rkQ7kNvwHSd86T&_nc_oc=AdnIQRGQh5aisLMkCwlI77dOf8e3uxbuGQQ71ixGMWU367xEGMcVrbCZw9CIAGAVPIX5y4cSNooJRRmED_-Pk2Oj&_nc_zt=23&_nc_ht=scontent.fcvj5-1.fna&_nc_gid=h4B5xRQOO6bq6jsCwHbLoA&oh=00_AfJUFyGLAQ4Sy8kMl-AmfD68XXPXLA49Yb_gGTXhkBILfg&oe=6837FAED" alt="Logo Kaptia" />
    </div>
    <nav class="menu">
      <ul>
        <li><a href="home.html"><i class="fas fa-home"></i> Página de inicio</a></li>
        <li class="active"><a href="mapa-interactivo.html"><i class="fas fa-map-marked-alt"></i> Mapa interactivo</a></li>
        <li><a href="clientes.html"><i class="fas fa-users"></i> Mis clientes</a></li>
        <li><a href="agenda.html"><i class="fas fa-calendar-alt"></i> Agenda</a></li>
        <li><a href="mensajes.html"><i class="fas fa-comments"></i> Mensajes</a></li>
        <li><a href="herramientas.html"><i class="fas fa-tools"></i> Herramientas</a></li>
        <li><a href="chatbot.html"><i class="fas fa-robot"></i> Contacta a un asesor</a></li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <a href="#configuracion"><i class="fas fa-cog"></i> Configuración</a>
      <a href="#ayuda"><i class="fas fa-question-circle"></i> Ayuda</a>
      <a href="index.html"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a>
    </div>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-content">
    <header class="topbar">
      <h1>Mapa Interactivo</h1>
      <div class="topbar-actions">
        <div class="search-user-section">
          <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Buscar ubicación..." />
          </div>
          <div class="user-profile">
            <img src="https://media.licdn.com/dms/image/v2/D5603AQEw-UoZ06Kb-A/profile-displayphoto-shrink_200_200/B56ZcELhdZHwAc-/0/1748121819494?e=1753315200&v=beta&t=umlB7AE5ew2DhHiSiN3-sUj3KmX2enK5mF7vCQyGtME" alt="Usuario" class="avatar" />
            <div class="dropdown-menu" id="userMenu">
              <a href="#"><i class="fas fa-user"></i> Ver perfil</a>
              <a href="#"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- SECCIÓN IZQUIERDA -->
      <section class="left-section">
        <!-- Filtros del mapa -->
        <div class="filter-container">
          <select id="filterEstado">
            <option value="">Estado: Todos</option>
          </select>
          <select id="filterPrioridad">
            <option value="">Prioridad: Todas</option>
            <option value="Alta">Alta</option>
            <option value="Media">Media</option>
            <option value="Baja">Baja</option>
          </select>
          <select id="filterCanal">
            <option value="">Canal: Todos</option>
            <option value="Directo">Directo</option>
            <option value="Distribuidor">Distribuidor</option>
            <option value="Online">Online</option>
          </select>
          <button onclick="applyFilters()">Aplicar Filtros</button>
        </div>

        <!-- Contenedor del mapa -->
        <div class="map-container">
          <div id="map" style="height: 600px;"></div>
        </div>
      </section>

      <!-- SECCIÓN DERECHA -->
      <aside class="right-section">
        <!-- Recordatorios -->
        <div class="reminders">
          <div class="reminders-header">
            <div class="title-with-icon">
              <i class="fas fa-bell"></i>
              <span class="notification-dot"></span>
              <h2>Recordatorios</h2>
            </div>
            <div class="period-selector">
              <button id="periodButton">
                Hoy <i class="fas fa-chevron-down"></i>
              </button>
              <div class="period-dropdown" id="periodMenu">
                <a href="#" class="active">Hoy</a>
                <a href="#">Ayer</a>
                <a href="#">Esta semana</a>
                <a href="#">Próxima semana</a>
              </div>
            </div>
          </div>

          <div class="reminders-list">
            <div class="reminder-item">
              <div class="reminder-icon">
                <i class="fas fa-video"></i>
              </div>
              <div class="reminder-content">
                <h3>Zoom Agrotienda (CDMX)</h3>
                <p>9:00 hrs - Vie 14 mar</p>
              </div>
              <div class="reminder-status pending"></div>
            </div>

            <div class="reminder-item">
              <div class="reminder-icon">
                <i class="fas fa-calendar"></i>
              </div>
              <div class="reminder-content">
                <h3>Visita Cliente Invernaderos SA</h3>
                <p>14:30 hrs - Vie 14 mar</p>
              </div>
              <div class="reminder-status completed">
                <i class="fas fa-check"></i>
              </div>
            </div>
          </div>

          <div class="reminders-footer">
            <a href="#" class="show-all">Mostrar todos</a>
            <a href="#" class="add-new">Añadir+</a>
          </div>
        </div>

        <!-- Notificaciones -->
        <div class="alerts">
          <div class="reminders-header">
            <div class="title-with-icon">
              <i class="fas fa-bell"></i>
              <span class="notification-dot"></span>
              <h2>Notificaciones</h2>
            </div>
          </div>
          <div class="alert-item">
            <p><strong>Invernaderos Bonanza</strong> (Jalisco)<br>Cliente respondió y agendó cita.</p>
            <button onclick="mostrarAlerta('Invernaderos Bonanza (Jalisco)')">Ver Detalles</button>
          </div>
          <div class="alert-item">
            <p><strong>Finca La Paloma</strong> (CDMX)<br>Cliente confirmó interés.</p>
            <button onclick="mostrarAlerta('Finca La Paloma (CDMX)')">Ver Detalles</button>
          </div>
          <div class="alert-item">
            <p><strong>Agroindustrial El Sol</strong> (Veracruz)<br>Cliente solicita seguimiento.</p>
            <button onclick="mostrarAlerta('Agroindustrial El Sol (Veracruz)')">Ver Detalles</button>
          </div>
        </div>

        <!-- Lista de Clientes Potenciales -->
        <div class="clientes">
          <h2>Clientes Potenciales</h2>
          <ul id="clientesUl"></ul>
        </div>

        <!-- Explicación del Dashboard -->
        <div class="dashboard-explanation">
          <h2>¿Necesitas Ayuda?</h2>
          <p>
            Si tienes alguna duda sobre cómo usar esta plataforma o requieres asistencia personalizada, 
            contacta a nuestro equipo de soporte.
          </p>
          <button class="btn-detail" style="width: 100%; margin-top: 15px;">Contactar Soporte</button>
        </div>
      </aside>
    </div>
  </main>

  <script>
    // Inicialización del mapa
    const map = L.map('map').setView([23.634501, -102.552784], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Manejo del menú de usuario
    const userAvatar = document.querySelector('.avatar');
    const userMenu = document.getElementById('userMenu');
    
    userAvatar.addEventListener('click', (e) => {
      e.stopPropagation();
      userMenu.classList.toggle('show');
    });

    // Manejo del selector de periodo
    const periodButton = document.getElementById('periodButton');
    const periodMenu = document.getElementById('periodMenu');
    
    periodButton.addEventListener('click', (e) => {
      e.stopPropagation();
      periodMenu.classList.toggle('show');
    });

    // Cerrar menús al hacer clic fuera
    document.addEventListener('click', () => {
      userMenu.classList.remove('show');
      periodMenu.classList.remove('show');
    });

    // Prevenir cierre al hacer clic dentro de los menús
    userMenu.addEventListener('click', (e) => e.stopPropagation());
    periodMenu.addEventListener('click', (e) => e.stopPropagation());

    // Actualizar el texto del botón de periodo al seleccionar una opción
    const periodOptions = periodMenu.querySelectorAll('a');
    periodOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
        const selectedText = option.textContent;
        periodButton.innerHTML = `${selectedText} <i class="fas fa-chevron-down"></i>`;
        
        // Actualizar clase activa
        periodOptions.forEach(opt => opt.classList.remove('active'));
        option.classList.add('active');
        
        periodMenu.classList.remove('show');
      });
    });

    // Función para mostrar alertas
    function mostrarAlerta(titulo) {
      alert(`Detalles de la alerta: ${titulo}`);
    }
  </script>
</body>
</html> 